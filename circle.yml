dependencies:
  pre:
    - pip install ansible
    - pip install --upgrade setuptools
  post:
    - go get -u github.com/golang/lint/golint
    - go build main.go

test:
  override:
    - if [[ -n $(gofmt -l .) ]]; then echo "Please run gofmt"; exit 1; fi
    - golint ./...
    - go tool vet .
    - go test -v -race ./...

machine:
  python:
    version: 2.7.10

general:
  artifacts:
    - "consume-backend"

deployment:  
  prod:
    branch: master
    commands:
      - ansible-playbook deployment/deploy.yml -i deployment/vars
